\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{luanodelist}
\RequirePackage{luatexbase-mcb}
\RequirePackage{kvoptions}

\SetupKeyvalOptions{
  family=LN,
  prefix=LN@
}
\DeclareStringOption[term and log]{channel}
\DeclareStringOption[postlinebreak]{callback}
\DeclareStringOption[1]{verbosity}
\DeclareStringOption[guided]{interface}

\ProcessKeyvalOptions*

\newcommand{\setluanodelist}[1]{\setkeys{LN}{#1}}

\directlua{
  local options = {}
  options.verbosity = tonumber(\LN@verbosity)
  options.channel = '\LN@channel'
  options.callback = '\LN@callback'
  options.interface = '\LN@interface'

  package.path = './lua/?.lua;' .. package.path

  luanodelist = require("luanodelist")
  luanodelist.get_options(options)
  luanodelist.execute()
}
